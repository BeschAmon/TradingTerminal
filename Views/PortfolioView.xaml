<UserControl x:Class="TradingTerminal.Views.PortfolioView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="clr-namespace:TradingTerminal.ViewModels"
             d:DataContext="{d:DesignInstance vm:PortfolioViewModel}"
             mc:Ignorable="d" 
             Background="Transparent">

    <Border CornerRadius="8" 
            Background="#FF252526" 
            BorderBrush="#FF3E3E40" 
            BorderThickness="1"
            Padding="10">

        <Grid>
            <!-- Заголовок и кнопки управления -->
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Шапка портфеля -->
            <Border Grid.Row="0" 
                    Background="#FF1E1E1E" 
                    CornerRadius="6"
                    Padding="10"
                    Margin="0,0,0,10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Брокерский счет" 
                                   Foreground="White"
                                   FontWeight="SemiBold"/>
                        <TextBlock Text="Торговля без ограничений" 
                                   Foreground="#FFA0A0A0"
                                   FontSize="12"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" 
                                Orientation="Horizontal"
                                HorizontalAlignment="Right">
                        <Button Style="{StaticResource IconButtonStyle}"
                                ToolTip="Настройки">
                            <Path Data="M8 5.75C9.24264 5.75 10.25 6.75736 10.25 8C10.25 9.24264 9.24264 10.25 8 10.25C6.75736 10.25 5.75 9.24264 5.75 8C5.75 6.75736 6.75736 5.75 8 5.75ZM8 2.75C9.0883 2.75 10.0993 3.08114 10.9376 3.64817L3.64817 10.9376C3.08114 10.0993 2.75 9.0883 2.75 8C2.75 5.1005 5.1005 2.75 8 2.75ZM8 13.25C6.9117 13.25 5.90073 12.9189 5.06238 12.3518L12.3518 5.06238C12.9189 5.90073 13.25 6.9117 13.25 8C13.25 10.8995 10.8995 13.25 8 13.25ZM8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1Z"
                                  Fill="#FFA0A0A0"
                                  Stretch="Uniform"/>
                        </Button>

                        <Button Style="{StaticResource IconButtonStyle}"
                                ToolTip="Закрыть"
                                Margin="5,0,0,0">
                            <Path Data="M4.70711 3.29289C4.31658 2.90237 3.68342 2.90237 3.29289 3.29289C2.90237 3.68342 2.90237 4.31658 3.29289 4.70711L6.58579 8L3.29289 11.2929C2.90237 11.6834 2.90237 12.3166 3.29289 12.7071C3.68342 13.0976 4.31658 13.0976 4.70711 12.7071L8 9.41421L11.2929 12.7071C11.6834 13.0976 12.3166 13.0976 12.7071 12.7071C13.0976 12.3166 13.0976 11.6834 12.7071 11.2929L9.41421 8L12.7071 4.70711C13.0976 4.31658 13.0976 3.68342 12.7071 3.29289C12.3166 2.90237 11.6834 2.90237 11.2929 3.29289L8 6.58579L4.70711 3.29289Z"
                                  Fill="#FFA0A0A0"
                                  Stretch="Uniform"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Основное содержимое -->
            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Сводка по портфелю -->
                <Border Grid.Row="0"
                        Background="#FF1E1E1E"
                        CornerRadius="6"
                        Padding="10"
                        Margin="0,0,0,10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Стоимость"
                                       Foreground="#FFA0A0A0"
                                       FontSize="12"/>
                            <TextBlock Text="1 331,13 ₽" 
                                       Foreground="White"
                                       FontWeight="SemiBold"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Margin="20,0">
                            <TextBlock Text="Всё время"
                                       Foreground="#FFA0A0A0"
                                       FontSize="12"/>
                            <TextBlock Text="+160,40 ₽ (13,70%)" 
                                       Foreground="#FF4CAF50"
                                       FontWeight="SemiBold"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="За сегодня"
                                       Foreground="#FFA0A0A0"
                                       FontSize="12"/>
                            <TextBlock Text="-24,20 ₽ (1,79%)" 
                                       Foreground="#FFF44336"
                                       FontWeight="SemiBold"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Список активов -->
                <DataGrid Grid.Row="1"
          ItemsSource="{Binding Assets}"
          AutoGenerateColumns="False"
          HeadersVisibility="Column"
          BorderThickness="0"
          Background="Transparent"
          RowBackground="Transparent"
          AlternatingRowBackground="#1AFFFFFF"
          Foreground="White">
                    <!-- Основной цвет текста -->

                    <DataGrid.Resources>
                        <!-- Стиль для заголовков столбцов -->
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="#FF252526"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Padding" Value="10,5"/>
                            <Setter Property="HorizontalContentAlignment" Value="Left"/>
                        </Style>

                        <!-- Стиль для ячеек -->
                        <Style TargetType="DataGridCell">
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Padding" Value="10,5"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#FF3E3E40"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.Resources>

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Название" 
                           Binding="{Binding Name}"
                           Width="*"/>

                        <DataGridTextColumn Header="Доступно" 
                           Binding="{Binding Available, StringFormat={}{0:N2}}"
                           Width="Auto"/>

                        <DataGridTextColumn Header="Цена" 
                           Binding="{Binding Price, StringFormat={}{0:N2} ₽}"
                           Width="Auto"/>

                        <DataGridTextColumn Header="Стоимость" 
                           Binding="{Binding Value, StringFormat={}{0:N2} ₽}"
                           Width="Auto"/>

                        <DataGridTextColumn Header="Доход" 
                           Binding="{Binding Profit, StringFormat={}{0:N2} ₽}"
                           Width="Auto">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Foreground" Value="{Binding IsProfit, Converter={StaticResource BoolToColorConverter}}"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Доход %" 
                           Binding="{Binding ProfitPercent, StringFormat={}{0:N2}%}"
                           Width="Auto">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Foreground" Value="{Binding IsProfit, Converter={StaticResource BoolToColorConverter}}"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Grid>
    </Border>
</UserControl>